(this.webpackJsonprusskii=this.webpackJsonprusskii||[]).push([[0],{22:function(e,t,a){e.exports=a(34)},27:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),s=(a(27),a(28),a(8)),o=a(2),i=a.n(o),u=a(3),m=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(u.a)(l,2),s=c[0],o=c[1];return{loading:a,request:Object(n.useCallback)((function(e){var t,a,n,l,c,s=arguments;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"GET",a=s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3&&void 0!==s[3]?s[3]:{},r(!0),u.prev=4,a&&(a=JSON.stringify(a),n["Content-Type"]="application/json"),u.next=8,i.a.awrap(fetch(e,{method:t,body:a,headers:n}));case 8:return l=u.sent,u.next=11,i.a.awrap(l.json());case 11:if(c=u.sent,l.ok){u.next=14;break}throw new Error(c.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),u.abrupt("return",c);case 18:throw u.prev=18,u.t0=u.catch(4),r(!1),o(u.t0.message),u.t0;case 23:case"end":return u.stop()}}),null,null,[[4,18]])}),[]),error:s,clearError:Object(n.useCallback)((function(){return o(null)}),[])}};function d(){}var p=Object(n.createContext)({token:null,userId:null,login:d,logout:d,isAuthenticated:!1}),E=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"2rem"}},r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-red-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))},b=a(6),f=function(e){var t=e.links;return t.length?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u2116"),r.a.createElement("th",null,"Original"),r.a.createElement("th",null,"Shorten"),r.a.createElement("th",null,"Open"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.from),r.a.createElement("td",null,e.to),r.a.createElement("td",null,r.a.createElement(b.b,{to:"/detail/".concat(e._id)},"Open")))})))):r.a.createElement("p",{className:"center"},"No Links yet")},v=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=m(),s=c.loading,o=c.request,d=Object(n.useContext)(p).token,b=Object(n.useCallback)((function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(o("/api/link","GET",null,{Authorization:"Bearer ".concat(d)}));case 3:e=t.sent,l(e),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),null,null,[[0,7]])}),[d,o]);return Object(n.useEffect)((function(){b()}),[b]),s?r.a.createElement(E,null):r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(f,{links:a}))},h=function(){var e=Object(s.g)(),t=Object(n.useContext)(p),a=m().request,l=Object(n.useState)(""),c=Object(u.a)(l,2),o=c[0],d=c[1];Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Insert a Link",id:"link",type:"text",value:o,onChange:function(e){return d(e.target.value)},onKeyPress:function(n){var r;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if("Enter"!==n.key){l.next=10;break}return l.prev=1,l.next=4,i.a.awrap(a("/api/link/generate","POST",{from:o},{Authorization:"Bearer ".concat(t.token)}));case 4:r=l.sent,e.push("/detail/".concat(r.link._id)),l.next=10;break;case 8:l.prev=8,l.t0=l.catch(1);case 10:case"end":return l.stop()}}),null,null,[[1,8]])}}),r.a.createElement("label",{htmlFor:"link"},"Insert the link here"))))},g=function(e){var t=e.link;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Link"),r.a.createElement("p",null,"Your link:"," ",r.a.createElement("a",{href:t.to,target:"_blank",rel:"noopener noreferrer"},t.to)),r.a.createElement("p",null,"From:"," ",r.a.createElement("a",{href:t.from,target:"_blank",rel:"noopener noreferrer"},t.from)),r.a.createElement("p",null,"Number of clicks on link: ",r.a.createElement("strong",null,t.clicks)),r.a.createElement("p",null,"Date Created:"," ",r.a.createElement("strong",null,new Date(t.date).toLocaleDateString())))},k=function(){var e=Object(n.useContext)(p).token,t=m(),a=t.request,l=t.loading,c=Object(n.useState)(null),o=Object(u.a)(c,2),d=o[0],b=o[1],f=Object(s.h)().id,v=Object(n.useCallback)((function(){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(a("/api/link/".concat(f),"GET",null,{Authorization:"Bearer ".concat(e)}));case 3:t=n.sent,b(t),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])}),[e,f,a]);return Object(n.useEffect)((function(){v()}),[v]),l?r.a.createElement(E,null):r.a.createElement(r.a.Fragment,null,!l&&d&&r.a.createElement(g,{link:d}))},O=a(11),w=a(12),j=function(){var e=Object(n.useContext)(p),t=Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[]),a=m(),l=a.loading,c=a.request,s=a.error,o=a.clearError,d=Object(n.useState)({email:"",password:""}),E=Object(u.a)(d,2),b=E[0],f=E[1];Object(n.useEffect)((function(){t(s),o()}),[s,t,o]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var v=function(e){f(Object(w.a)({},b,Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 offset-s3"},r.a.createElement("h1",null,"Link Reducer"),r.a.createElement("div",{className:"card  indigo darken-2",style:{borderRadius:30}},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},"Authentication"),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field "},r.a.createElement("input",{style:{borderRadius:10,input:{marginRight:20}},name:"email",id:"email",type:"email",className:"validate",placeholder:"enter your email",onChange:v}),r.a.createElement("label",{htmlFor:"email"},"Email"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field "},r.a.createElement("input",{style:{borderRadius:10},name:"password",id:"password",type:"password",className:"validate",placeholder:"enter your password",onChange:v}),r.a.createElement("label",{htmlFor:"password"},"Password"))))),r.a.createElement("div",{className:"card-action",style:{borderRadius:30}},r.a.createElement("button",{className:"btn yellow darken-4",style:{marginRight:10,marginLeft:20,borderRadius:20},disabled:l,onClick:function(){var a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(c("api/auth/login","POST",Object(w.a)({},b)));case 3:a=n.sent,e.login(a.token,a.userId),t(a.message),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),null,null,[[0,8]])}},"Log in"),r.a.createElement("button",{style:{borderRadius:20},className:"btn grey whiten-1 black-text",onClick:function(){var e;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.a.awrap(c("api/auth/register","POST",Object(w.a)({},b)));case 3:e=a.sent,t(e.message),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),null,null,[[0,7]])},disabled:l},"Register")))))},y=function(){var e=Object(s.g)(),t=Object(n.useContext)(p);return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper blue darken-1",style:{padding:"0 2rem"}},r.a.createElement("span",{className:"brand-logo"},"LinksReducer"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(b.c,{to:"/create"},"Create")),r.a.createElement("li",null,r.a.createElement(b.c,{to:"/links"},"Links")),r.a.createElement("li",null,"  ",r.a.createElement("button",{className:"waves-effect waves-light btn-small",onClick:function(a){a.preventDefault(),t.logout(),e.push("/")}},"Log Out")))))};var x=function(){var e=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),c=Object(u.a)(l,2),s=c[0],o=c[1],i=Object(n.useState)(null),m=Object(u.a)(i,2),d=m[0],p=m[1],E=Object(n.useCallback)((function(e,t){r(e),p(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),b=Object(n.useCallback)((function(){r(null),p(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&E(e.token,e.userId),o(!0)}),[E]),{login:E,logout:b,token:a,userId:d,ready:s}}(),t=e.login,a=e.logout,l=e.token,c=e.userId,o=e.ready,i=!!l,m=i?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/links",exact:!0},r.a.createElement(v,null)),r.a.createElement(s.b,{path:"/detail/:id"},r.a.createElement(k,null)),r.a.createElement(s.b,{path:"/create",exact:!0},r.a.createElement(h,null)),r.a.createElement(s.a,{to:"/create"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(j,null)),r.a.createElement(s.a,{to:"/"}));return o?r.a.createElement(p.Provider,{value:{login:t,logout:a,token:l,userId:c}},r.a.createElement(b.a,null,i&&r.a.createElement(y,null),r.a.createElement("div",{className:"container"},m))):r.a.createElement(E,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[22,1,2]]]);
//# sourceMappingURL=main.77582e9f.chunk.js.map